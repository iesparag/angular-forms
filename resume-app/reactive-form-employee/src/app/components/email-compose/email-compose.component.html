<div class="email-compose">
  <!-- Header -->
  <div class="compose-header">
    <span class="header-text">Send Resume via Email</span>
    <button (click)="onCancel()" class="close-button">X</button>
  </div>

  <!-- Email Form -->
  <div class="compose-body">
    <!-- Email List Dropdown -->
    <div class="form-group">
      <label for="sheetSelect">Select Email List</label>
      <select id="sheetSelect" [(ngModel)]="selectedSheetId" (change)="onNativeSheetChange($event)">
        <option value="">-- Select --</option>
        <option *ngFor="let sheet of sheets" [value]="sheet._id">{{sheet.name}}</option>
      </select>
      <div class="hint">Select a list to add all emails at once</div>
    </div>

    <!-- To (chips) -->`
    <div class="form-group">
      <label>To</label>
      <div class="chips">
        <span *ngFor="let email of emailList" class="chip">
          {{email}}
          <button type="button" (click)="remove(email)">x</button>
        </span>
        <input
          placeholder="Add email"
          [(ngModel)]="newEmail"
          (keydown.enter)="addEmail()"
          (blur)="addEmail()"
          type="text"
        />
      </div>
      <div class="hint">You can add more emails manually or select another list</div>
    </div>

    <!-- Subject -->
    <div class="form-group">
      <label>Subject</label>
      <input type="text" [(ngModel)]="emailData.subject" />
    </div>

    <!-- Message -->
    <div class="form-group">
      <label>Message</label>
      <textarea [(ngModel)]="emailData.message" rows="8"></textarea>
    </div>

    <!-- Attachments (PDF only) -->
    <div class="form-group">
      <label>Attach PDF</label>
      <input type="file" (change)="handleFiles($event)" accept="application/pdf" multiple />
      <div *ngIf="emailData.attachments.length > 0">
        <div *ngFor="let file of emailData.attachments; let i = index">
          {{file.name}}
          <button type="button" (click)="removeAttachment(i)">Remove</button>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="form-group buttons-group">
      <button (click)="onSend()">Send</button>
      <button (click)="onCancel()">Discard</button>
    </div>
  </div>
</div>
